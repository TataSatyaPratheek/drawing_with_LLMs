<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600">
  <!-- Background -->
  <rect width="800" height="600" fill="#f8f9fa" />
  
  <!-- Title -->
  <text x="400" y="40" font-family="Arial" font-size="24" text-anchor="middle" fill="#333">LLM-Enhanced SVG Generation Architecture</text>
  
  <!-- Original System (Left Side) -->
  <rect x="50" y="100" width="200" height="400" rx="10" fill="#e9ecef" stroke="#495057" stroke-width="2" />
  <text x="150" y="130" font-family="Arial" font-size="18" text-anchor="middle" font-weight="bold">Original System</text>
  
  <!-- Original System Components -->
  <rect x="70" y="150" width="160" height="60" rx="5" fill="#ced4da" stroke="#495057" />
  <text x="150" y="185" font-family="Arial" font-size="14" text-anchor="middle">Prompt Analyzer</text>
  
  <rect x="70" y="230" width="160" height="60" rx="5" fill="#ced4da" stroke="#495057" />
  <text x="150" y="265" font-family="Arial" font-size="14" text-anchor="middle">Scene Creator</text>
  
  <rect x="70" y="310" width="160" height="60" rx="5" fill="#ced4da" stroke="#495057" />
  <text x="150" y="345" font-family="Arial" font-size="14" text-anchor="middle">SVG Generator</text>
  
  <rect x="70" y="390" width="160" height="60" rx="5" fill="#ced4da" stroke="#495057" />
  <text x="150" y="425" font-family="Arial" font-size="14" text-anchor="middle">Pattern Factory</text>
  
  <!-- Enhanced System (Right Side) -->
  <rect x="350" y="100" width="400" height="400" rx="10" fill="#e7f5ff" stroke="#1864ab" stroke-width="2" />
  <text x="550" y="130" font-family="Arial" font-size="18" text-anchor="middle" font-weight="bold">LLM-Enhanced System</text>
  
  <!-- Enhanced System Components -->
  <rect x="370" y="150" width="160" height="60" rx="5" fill="#a5d8ff" stroke="#1864ab" />
  <text x="450" y="185" font-family="Arial" font-size="14" text-anchor="middle">LLM Prompt Analyzer</text>
  
  <rect x="370" y="230" width="160" height="60" rx="5" fill="#a5d8ff" stroke="#1864ab" />
  <text x="450" y="265" font-family="Arial" font-size="14" text-anchor="middle">Scene Elaborator</text>
  
  <rect x="370" y="310" width="160" height="60" rx="5" fill="#a5d8ff" stroke="#1864ab" />
  <text x="450" y="345" font-family="Arial" font-size="14" text-anchor="middle">LLM SVG Generator</text>
  
  <rect x="370" y="390" width="160" height="60" rx="5" fill="#a5d8ff" stroke="#1864ab" />
  <text x="450" y="425" font-family="Arial" font-size="14" text-anchor="middle">LLM Manager</text>
  
  <rect x="570" y="190" width="160" height="60" rx="5" fill="#a5d8ff" stroke="#1864ab" />
  <text x="650" y="225" font-family="Arial" font-size="14" text-anchor="middle">CLIP Evaluator</text>
  
  <rect x="570" y="310" width="160" height="60" rx="5" fill="#a5d8ff" stroke="#1864ab" />
  <text x="650" y="345" font-family="Arial" font-size="14" text-anchor="middle">RL Optimizer</text>
  
  <!-- Connection Lines with Arrows -->
  <!-- Define arrow markers -->
  <defs>
    <marker id="arrowBlack" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#495057" />
    </marker>
    <marker id="arrowBlue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#1864ab" />
    </marker>
    <marker id="dashedArrowBlack" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#495057" />
    </marker>
  </defs>
  
  <!-- Input -->
  <line x1="300" y1="180" x2="359" y2="180" stroke="#495057" stroke-width="2" marker-end="url(#arrowBlack)" />
  <text x="335" y="170" font-family="Arial" font-size="12" text-anchor="middle">Prompt</text>
  
  <!-- Original to Enhanced (Dashed lines showing fallback relationships) -->
  <path d="M 230 180 C 280 180 300 180 359 180" fill="none" stroke="#495057" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#dashedArrowBlack)" />
  <path d="M 230 260 C 280 260 300 260 359 260" fill="none" stroke="#495057" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#dashedArrowBlack)" />
  <path d="M 230 340 C 280 340 300 340 359 340" fill="none" stroke="#495057" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#dashedArrowBlack)" />
  
  <!-- Enhanced components vertical connections -->
  <line x1="450" y1="210" x2="450" y2="221" stroke="#1864ab" stroke-width="2" marker-end="url(#arrowBlue)" />
  <line x1="450" y1="290" x2="450" y2="301" stroke="#1864ab" stroke-width="2" marker-end="url(#arrowBlue)" />
  <line x1="450" y1="370" x2="450" y2="381" stroke="#1864ab" stroke-width="2" marker-end="url(#arrowBlue)" />
  
  <!-- Enhanced components horizontal connections -->
  <line x1="530" y1="180" x2="559" y2="190" stroke="#1864ab" stroke-width="2" marker-end="url(#arrowBlue)" />
  <line x1="530" y1="340" x2="559" y2="340" stroke="#1864ab" stroke-width="2" marker-end="url(#arrowBlue)" />
  
  <!-- CLIP to RL connection -->
  <line x1="650" y1="250" x2="650" y2="300" stroke="#1864ab" stroke-width="2" marker-end="url(#arrowBlue)" />
  
  <!-- Feedback loop from RL to Scene Elaborator -->
  <path d="M 570 330 C 500 300 470 280 450 290" fill="none" stroke="#1864ab" stroke-width="2" marker-end="url(#arrowBlue)" />
  
  <!-- Fallback mechanism -->
  <path d="M 535 425 Q 580 440 600 500 Q 400 520 230 460 Q 250 430 270 425" fill="none" stroke="#d63384" stroke-width="3" stroke-dasharray="10,5" />
  <text x="400" y="540" font-family="Arial" font-size="14" text-anchor="middle" fill="#d63384">Fallback Mechanism</text>
  
  <!-- Improved SVG Output Box -->
  <g transform="translate(650, 400)">
    <!-- Output document container -->
    <rect x="0" y="0" width="100" height="120" rx="5" fill="#ffffff" stroke="#212529" stroke-width="2" />
    
    <!-- Document header -->
    <rect x="0" y="0" width="100" height="24" rx="5" fill="#e9ecef" stroke="#212529" stroke-width="2" />
    <text x="50" y="16" font-family="Arial" font-size="12" text-anchor="middle" font-weight="bold">SVG Output</text>
    
    <!-- Document content - SVG icon -->
    <rect x="15" y="34" width="70" height="70" fill="#f8f9fa" stroke="#212529" stroke-width="1" />
    
    <!-- Simplified SVG content representation -->
    <circle cx="50" cy="54" r="10" fill="#fd7e14" stroke="#212529" stroke-width="0.5" />
    <rect x="35" y="74" width="30" height="20" fill="#339af0" stroke="#212529" stroke-width="0.5" />
    
    <!-- SVG file extension label -->
    <text x="50" y="114" font-family="Arial" font-size="10" text-anchor="middle">.svg</text>
  </g>
  
  <!-- Output arrow from LLM SVG Generator to SVG Output -->
  <path d="M 530 340 C 580 340 600 340 640 400" fill="none" stroke="#1864ab" stroke-width="2" marker-end="url(#arrowBlue)" />
</svg>